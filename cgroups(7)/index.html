<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="리눅스 매뉴얼 페이지 일부 한글 번역">
    
    <link rel="canonical" href="https://wariua.github.io/man-pages-ko/cgroups%287%29/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>cgroups(7) - man-pages-ko</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/idea.min.css">
        
    
    <link href="../css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="..">man-pages-ko</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../section_file/">File</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_ipc/">IPC</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_memory/">Memory</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_network/">Network</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_process/">Process</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_thread/">Thread</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_trouble_shooting/">Trouble Shooting</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_others/">Others</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#name">NAME</a></li>
        <li class="first-level "><a href="#description">DESCRIPTION</a></li>
            <li class="second-level"><a href="#_1">용어</a></li>
                
            <li class="second-level"><a href="#cgroups-1-2">cgroups 버전 1과 버전 2</a></li>
                
        <li class="first-level "><a href="#cgroups-1">cgroups 버전 1</a></li>
            <li class="second-level"><a href="#_2">태스크(스레드) 대 프로세스</a></li>
                
            <li class="second-level"><a href="#v1">v1 컨트롤러 마운트</a></li>
                
            <li class="second-level"><a href="#v1_1">v1 컨트롤러 언마운트</a></li>
                
            <li class="second-level"><a href="#cgroups-1_1">cgroups 버전 1 컨트롤러</a></li>
                
            <li class="second-level"><a href="#cgroup">cgroup 생성과 프로세스 이동</a></li>
                
            <li class="second-level"><a href="#cgroup_1">cgroup 제거</a></li>
                
            <li class="second-level"><a href="#cgroups-v1">cgroups v1 해제 알림</a></li>
                
            <li class="second-level"><a href="#cgroups-v1_1">cgroups v1 이름 지정 계층 구조</a></li>
                
        <li class="first-level "><a href="#cgroups-2">cgroups 버전 2</a></li>
            <li class="second-level"><a href="#cgroups-v2">cgroups v2 통합 구조</a></li>
                
            <li class="second-level"><a href="#cgroups-v2_1">cgroups v2 마운트 옵션</a></li>
                
            <li class="second-level"><a href="#cgroups-v2_2">cgroups v2 컨트롤러</a></li>
                
            <li class="second-level"><a href="#cgroups-v2_3">cgroups v2 서브트리 제어</a></li>
                
            <li class="second-level"><a href="#cgroups-v2_4">cgroups v2 "내부 프로세스 없음" 규칙</a></li>
                
            <li class="second-level"><a href="#cgroups-v2-cgroupevents">cgroups v2 cgroup.events 파일</a></li>
                
            <li class="second-level"><a href="#cgroups-v2_5">cgroups v2 해제 알림</a></li>
                
            <li class="second-level"><a href="#cgroups-v2-cgroupstat">cgroups v2 cgroup.stat 파일</a></li>
                
            <li class="second-level"><a href="#cgroup_2">자손 cgroup 수 제한</a></li>
                
        <li class="first-level "><a href="#cgroups">cgroups 위임: 특권 작은 사용자로 계층 구조 위임하기</a></li>
            <li class="second-level"><a href="#cgroups-v2-nsdelegate-cgroup">cgroups v2 위임: nsdelegate와 cgroup 네임스페이스</a></li>
                
            <li class="second-level"><a href="#cgroups_1">cgroups 위임 격납 규칙</a></li>
                
        <li class="first-level "><a href="#cgroups-2_1">cgroups 버전 2 스레드 모드</a></li>
            <li class="second-level"><a href="#_3">스레드 대 도메인 컨트롤러</a></li>
                
            <li class="second-level"><a href="#_4">스레드 서브트리 생성</a></li>
                
            <li class="second-level"><a href="#_5">스레드 서브트리 사용</a></li>
                
            <li class="second-level"><a href="#cgrouptype">cgroup.type 기록 및 스레드 서브트리 생성 규칙</a></li>
                
            <li class="second-level"><a href="#domain-threaded-cgroup">"domain threaded" cgroup 유형</a></li>
                
            <li class="second-level"><a href="#cgroup_3">루트 cgroup의 예외 사항</a></li>
                
            <li class="second-level"><a href="#cgroups-v2-cpu">cgroups v2 "cpu" 컨트롤러와 실시간 스레드</a></li>
                
        <li class="first-level "><a href="#errors">ERRORS</a></li>
        <li class="first-level "><a href="#notes">NOTES</a></li>
            <li class="second-level"><a href="#proc">/proc 파일</a></li>
                
            <li class="second-level"><a href="#syskernelcgroup">/sys/kernel/cgroup 파일</a></li>
                
        <li class="first-level "><a href="#see-also">SEE ALSO</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="name">NAME</h2>
<p>cgroups - 리눅스 제어 그룹</p>
<h2 id="description">DESCRIPTION</h2>
<p>보통 cgroups라고 부르는 제어 그룹(control group)은 프로세스들을 계층적 그룹들로 조직해서 다양한 종류의 자원 사용을 제한하거나 감시할 수 있는 리눅스 커널의 기능이다. 커널의 cgroup 인터페이스는 cgroupfs라는 유사 파일 시스템을 통해 제공된다. 그룹 관리는 커널의 cgroup 핵심 코드에 구현돼 있으며 자원 추적 및 제한은 자원 종류별 서브시스템(메모리, CPU 등등)에 구현돼 있다.</p>
<h3 id="_1">용어</h3>
<p><em>cgroup</em>은 cgroup 파일 시스템을 통해 규정한 제한이나 매개변수들의 구속을 받는 프로세스들의 집합이다.</p>
<p><em>서브시스템(subsystem)</em>은 cgroup 내 프로세스들의 행동을 변경하는 커널 구성 요소다. 다양한 서브시스템이 구현돼 있어서 cgroup에 사용 가능한 CPU 시간이나 메모리의 양을 제한하거나, cgroup이 사용한 CPU 시간을 기록하거나, cgroup 내 프로세스들의 실행을 동결하고 재개하는 게 가능하다. 서브시스템을 <em>자원 컨트롤러(resource controller)</em>라고도 (또는 그냥 컨트롤러라고도) 부른다.</p>
<p>어떤 컨트롤러의 cgroup들은 <em>계층적으로</em> 배치돼 있다. cgroup 파일 시스템 내에서 하위 디렉터리를 만들고, 지우고, 이름을 바꾸는 방식으로 그 계층 구조를 정의한다. 그리고 계층 구조의 각 단계에서 속성(가령 제한값)을 지정할 수 있다. cgroup에서 제공하는 제한, 제어, 기록 기능은 일반적으로 그 속성이 정의된 cgroup 이하의 부분 계층 구조 전체에 영향을 준다. 그래서 예를 들어 계층 구조 상위 단계의 cgroup에서 어떤 제한을 주면 그걸 자손 cgroup에서 초과할 수 없다.</p>
<h3 id="cgroups-1-2">cgroups 버전 1과 버전 2</h3>
<p>cgroups 구현이 처음 출시된 건 리눅스 2.6.24에서였다. 시간이 흐르며 다양한 cgroup 컨트롤러들이 추가돼서 다양한 종류의 자원들을 관리할 수 있게 됐다. 하지만 그 컨트롤러들의 개발은 전반적으로 조정이 안 돼 있었고, 그래서 컨트롤러들 간에 비일관성이 발생하고 cgroup 계층 구조 관리가 꽤 복잡해지는 결과를 낳았다. 그 문제들에 대한 더 긴 설명은 커널 소스 파일 <code>Documentation/admin-guide/cgroup-v2.rst</code>(리눅스 4.17 이전은 <code>Documentation/cgroup-v2.txt</code>)에서 볼 수 있다.</p>
<p>cgroups 최초 구현(cgroups 버전 1)의 문제들 때문에 리눅스 3.10부터 그 문제들을 해결하기 위한 새롭고 독립적인 구현체를 만드는 작업이 시작됐다. 처음에는 실험적으로 표시돼서 마운트 옵션 <code>-o __DEVEL__sane_behavior</code> 뒤에 숨어 있다가 리눅스 4.5가 출시될 때 마침내 새 버전(cgroups 버전 2)이 정식 버전이 됐다. 두 버전 간의 차이점들을 아래에서 설명한다. cgroups v1에 있는 <code>cgroup.sane_behavior</code> 파일은 이 마운트 옵션의 유물이다. 그 파일은 항상 "0"을 내놓으며 하위 호환성을 위해 유지되고 있을 뿐이다.</p>
<p>cgroups v2가 cgroups v1을 대체하기 위한 것이긴 하지만 이전 시스템은 계속 존재한다. (그리고 호환성 문제가 있기 때문에 쉽게 제거되지 않을 것 같다.) 현재 cgroups v2는 cgroups v1에서 쓸 수 있는 컨트롤러들 중 일부만 구현하고 있다. 두 시스템은 동일한 시스템에서 v1 컨트롤러와 v2 컨트롤러를 모두 마운트 할 수 있도록 구현돼 있다. 그래서 예를 들어 버전 2에서 지원하는 컨트롤러들을 사용하면서도 버전 2에서 아직 컨트롤러를 지원하지 않는 버전 1의 컨트롤러까지 사용하는 게 가능하다. 유일한 제약은 한 컨트롤러를 cgroups v1 계층 구조와 cgroups v2 계층 구조 모두에서 동시에 사용할 수는 없다는 점이다.</p>
<h2 id="cgroups-1">cgroups 버전 1</h2>
<p>cgroups v1 하에서는 시스템의 프로세스들에 대한 계층 구조를 각기 제공하는 별개의 cgroup 파일 시스템에 각 컨트롤러를 마운트 할 수 있다. 또한 같은 cgroup 파일 시스템에 여러 (또는 모든) cgroups v1 컨트롤러들을 함께 마운트 하는 것도 가능한데, 즉 함께 마운트 한 컨트롤러들이 동일한 프로세스 계층 구조를 관리하는 것이다.</p>
<p>마운트 된 각 계층 구조별로 디렉터리 트리가 제어 그룹 계층 구조를 반영한다. 각 디렉터리가 제어 그룹을 나타내고 자식 디렉터리는 자식 제어 그룹을 나타낸다. 예를 들어 <code>/user/joe/1.session</code>은 <code>/user</code>의 자식인 cgroup <code>joe</code>의 자식인 제어 그룹 <code>1.session</code>을 나타낸다. 각 cgroup 디렉터리 하에는 읽거나 쓸 수 있는 파일들이 있는데, 이는 자원 제한들과 몇몇 일반적인 cgroup 속성들을 나타낸다.</p>
<h3 id="_2">태스크(스레드) 대 프로세스</h3>
<p>cgroup v1에서는 <em>프로세스</em>와 <em>태스크</em>를 구별한다. 그 관점에서는 한 프로세스가 여러 태스크(사용자 공간 쪽에선 주로 스레드라고 하며 이 맨 페이지 나머지에서도 그렇게 부름)로 이뤄져 있을 수 있다. cgroups v1에서는 프로세스 내 스레드들의 cgroup 소속을 독립적으로 조작하는 게 가능하다.</p>
<p>cgroups v1에서 스레드들을 여러 cgroup들로 쪼갤 수 있다는 점이 몇몇 경우에 문제를 일으켰다. 예를 들어 <code>memory</code> 컨트롤러에서는 말이 안 되는데, 프로세스의 모든 스레드가 한 주소 공간을 공유하기 때문이다. 이러한 문제들 때문에 프로세스 내 스레드들의 cgroup 소속을 독립적으로 조작할 수 있도록 하는 것을 cgroups v2 최초 구현에서는 제거했으며, 이후에 제한된 형태로 되살렸다. (아래의 "스레드 모드" 설명 참고.)</p>
<h3 id="v1">v1 컨트롤러 마운트</h3>
<p>cgroups 사용을 위해선 커널이 <code>CONFIG_CGROUP</code> 옵션으로 빌드 돼 있어야 한다. 또한 v1 컨트롤러 각각에 연관된 설정 옵션이 있어서 설정을 해 줘야 그 컨트롤러를 이용할 수 있다.</p>
<p>v1 컨트롤러를 사용하려면 cgroup 파일 시스템으로 마운트를 해야 한다. 보통은 <code>/sys/fs/cgroup</code>에 마운트 한 <tt><a class="wikilink" href="/man-pages-ko/tmpfs(5)/">tmpfs(5)</a></tt> 파일 시스템 아래에 마운트 한다. 즉 <code>cpu</code> 컨트롤러를 다음처럼 마운트 할 수 있을 것이다.</p>
<pre><code>mount -t cgroup -o cpu none /sys/fs/cgroup/cpu
</code></pre>
<p>같은 계층 구조에 여러 컨트롤러를 함께 마운트 하는 게 가능하다. 예를 들어 다음은 한 계층 구조에 <code>cpu</code> 컨트롤러와 <code>cpuacct</code> 컨트롤러를 함께 마운트 한다.</p>
<pre><code>mount -t cgroup -o cpu,cpuacct none /sys/fs/cgroup/cpu,cpuacct
</code></pre>
<p>컨트롤러들을 함께 마운트 하면 그렇게 마운트 한 모든 컨트롤러들에 대해 프로세스가 같은 cgroup에 있게 되는 효과가 있다. 반면 컨트롤러들을 따로 마운트 하면 프로세스가 한 컨트롤러에 대해선 cgroup <code>/foo1</code>에 있으면서 다른 컨트롤러에 대해선 <code>/foo2/foo3</code>에 있는 게 가능하다.</p>
<p>모든 v1 컨트롤러들을 같은 계층 구조로 함께 마운트 하는 것도 가능하다.</p>
<pre><code>mount -t cgroup -o all cgroup /sys/fs/cgroup
</code></pre>
<p>(컨트롤러를 따로 지정하지 않은 경우의 기본값이기도 하므로 <code>-o all</code>를 생략해도 같은 결과를 얻을 수 있다.)</p>
<p>동일 컨트롤러를 여러 cgroup 계층 구조에 마운트 하는 건 불가능하다. 예를 들어 <code>cpu</code> 컨트롤러와 <code>cpuacct</code> 컨트롤러를 한 계층 구조에 같이 마운트 하고서 <code>cpu</code> 컨트롤러만 따로 다른 계층 구조에 마운트 하는 게 불가능하다. 정확히 동일한 컨트롤러 집합으로 여러 마운트 지점을 만드는 건 가능하다. 하지만 이렇게 하는 결과는 여러 마운트 지점에서 동일 계층 구조를 보여 주는 것일 뿐이다.</p>
<p>참고로 많은 시스템에서는 <code>/sys/fs/cgroup</code> 아래에 v1 컨트롤러들을 자동으로 마운트 한다. 특히 <code>systemd(1)</code>에서 그런 마운트 지점들을 자동으로 생성한다.</p>
<h3 id="v1_1">v1 컨트롤러 언마운트</h3>
<p>마운트 된 cgroup 파일 시스템을 다음 예처럼 <code>umount(8)</code> 명령으로 언마운트 할 수 있다.</p>
<pre><code>umount /sys/fs/cgroup/pids
</code></pre>
<p><em>주의</em>: cgroup 파일 시스템이 사용 중이 아니어야만, 즉 자식 cgroup이 없어야 언마운트 된다. 안 그러면 <code>umount(8)</code>의 효과는 마운트를 보이지 않게 하는 것뿐이다. 즉 마운트 지점이 실제로 제거되게 하려면 모든 자식 cgroup들을 먼저 제거해 둬야 하며, 그러려면 모든 소속 프로세스들을 그 cgroup에서 루트 cgroup으로 옮겨야 한다.</p>
<h3 id="cgroups-1_1">cgroups 버전 1 컨트롤러</h3>
<p>cgroups 버전 1 컨트롤러 각각은 (아래 적힌) 커널 구성 옵션에 좌우된다. 추가로 cgroups 기능 사용 여부는 커널 구성 옵션 <code>CONFIG_CGROUPS</code>에 좌우된다.</p>
<dl>
<dt><code>cpu</code> (리눅스 2.6.24부터. <code>CONFIG_CGROUP_SCHED</code>)</dt>
<dd>
<p>.... 자세한 내용은 <code>Documentation/scheduler/sched-design-CFS.rst</code>(리눅스 5.2 이전은 <code>Documentation/scheduler/sched-design-CFS.txt</code>)를 보라.</p>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/scheduler/sched-bwc.rst</code>(리눅스 5.2 이전은 <code>Documentation/scheduler/sched-bwc.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>cpuacct</code> (리눅스 2.6.24부터. <code>CONFIG_CGROUP_CPUACCT</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/cpuacct.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/cpuacct.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>cpuset</code> (리눅스 2.6.24부터. <code>CONFIG_CPUSETS</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/cpusets.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/cpusets.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>memory</code> (리눅스 2.6.25부터. <code>CONFIG_MEMCG</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/memory.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/memory.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>devices</code> (리눅스 2.6.26부터. <code>CONFIG_CGROUP_DEVICE</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/devices.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/devices.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>freezer</code> (리눅스 2.6.28부터. <code>CONFIG_CGROUP_FREEZER</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/freezer-subsystem.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/freezer-subsystem.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>net_cls</code> (리눅스 2.6.29부터. <code>CONFIG_CGROUP_NET_CLASSID</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/net_cls.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/net_cls.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>blkio</code> (리눅스 2.6.33부터. <code>CONFIG_BLK_CGROUP</code>)</dt>
<dd>
<p>....</p>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/blkio-controller.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/blkio-controller.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>perf_event</code> (리눅스 2.6.39부터. <code>CONFIG_CGROUP_PERF</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일들에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>net_prio</code> (리눅스 3.3부터. <code>CONFIG_CGROUP_NET_PRIO</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/net_prio.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/net_prio.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>hugetlb</code> (리눅스 3.5부터. <code>CONFIG_CGROUP_HUGETLB</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/hugetlb.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/hugetlb.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>pids</code> (리눅스 4.3부터. <code>CONFIG_CGROUP_PIDS</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/pids.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/pids.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
<dt><code>rdma</code> (리눅스 4.11부터. <code>CONFIG_CGROUP_RDMA</code>)</dt>
<dd>
<p>....</p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v1/rdma.rst</code>(리눅스 5.2 이전은 <code>Documentation/cgroup-v1/rdma.txt</code>)에서 자세한 내용을 볼 수 있다.</p>
</dd>
</dl>
<h3 id="cgroup">cgroup 생성과 프로세스 이동</h3>
<p>...</p>
<pre><code>mkdir /sys/fs/cgroup/cpu/cg1
</code></pre>
<p>...</p>
<p>...</p>
<pre><code>echo $$ &gt; /sys/fs/cgroup/cpu/cg1/cgroup.procs
</code></pre>
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<h3 id="cgroup_1">cgroup 제거</h3>
<p>...</p>
<h3 id="cgroups-v1">cgroups v1 해제 알림</h3>
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<pre><code>mount -o release_agent=pathname ...
</code></pre>
<p>....</p>
<h3 id="cgroups-v1_1">cgroups v1 이름 지정 계층 구조</h3>
<p>....</p>
<pre><code>mount -t cgroup -o none,name=somename none /some/mount/point
</code></pre>
<p>....</p>
<p>....</p>
<h2 id="cgroups-2">cgroups 버전 2</h2>
<p>....</p>
<p>....</p>
<ol>
<li>
<p>...</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>...</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>...</p>
</li>
</ol>
<p>....</p>
<p>....</p>
<h3 id="cgroups-v2">cgroups v2 통합 구조</h3>
<p>....</p>
<pre><code>mount -t cgroup2 none /mnt/cgroup2
</code></pre>
<p>....</p>
<p>....</p>
<h3 id="cgroups-v2_1">cgroups v2 마운트 옵션</h3>
<p>....</p>
<dl>
<dt><code>nsdelegate</code> (리눅스 4.15부터)</dt>
<dd>....</dd>
<dt><code>memory_localevents</code> (리눅스 5.2부터)</dt>
<dd>....</dd>
</dl>
<h3 id="cgroups-v2_2">cgroups v2 컨트롤러</h3>
<p>....</p>
<dl>
<dt><code>cpu</code> (리눅스 4.15부터)</dt>
<dd>....</dd>
<dt><code>cpuset</code> (리눅스 5.0부터)</dt>
<dd>....</dd>
<dt><code>freezer</code> (리눅스 5.2부터)</dt>
<dd>....</dd>
<dt><code>hugetlb</code> (리눅스 5.6부터)</dt>
<dd>....</dd>
<dt><code>io</code> (리눅스 4.5부터)</dt>
<dd>....</dd>
<dt><code>memory</code> (리눅스 4.5부터)</dt>
<dd>....</dd>
<dt><code>perf_event</code> (리눅스 4.11부터)</dt>
<dd>....</dd>
<dt><code>pids</code> (리눅스 4.5부터)</dt>
<dd>....</dd>
<dt><code>rdma</code> (리눅스 4.11부터)</dt>
<dd>....</dd>
</dl>
<p>....</p>
<p>....</p>
<h3 id="cgroups-v2_3">cgroups v2 서브트리 제어</h3>
<p>....</p>
<dl>
<dt><code>cgroup.controllers</code></dt>
<dd>....</dd>
<dt><code>cgroup.subtree_control</code></dt>
<dd>
<p>....</p>
<pre><code>echo '+pids -memory' &gt; x/y/cgroup.subtree_control
</code></pre>
<p>....</p>
</dd>
</dl>
<p>....</p>
<p>....</p>
<h3 id="cgroups-v2_4">cgroups v2 "내부 프로세스 없음" 규칙</h3>
<p>....</p>
<p>....</p>
<p>....</p>
<p>....</p>
<h3 id="cgroups-v2-cgroupevents">cgroups v2 <code>cgroup.events</code> 파일</h3>
<p>....</p>
<pre><code class="language-text">$ cat mygrp/cgroup.events
populated 1
frozen 0
</code></pre>
<p>....</p>
<dl>
<dt><code>populated</code></dt>
<dd>....</dd>
<dt><code>frozen</code> (리눅스 5.2부터)</dt>
<dd>....</dd>
</dl>
<p>....</p>
<h3 id="cgroups-v2_5">cgroups v2 해제 알림</h3>
<p>....</p>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<h3 id="cgroups-v2-cgroupstat">cgroups v2 <code>cgroup.stat</code> 파일</h3>
<p>....</p>
<dl>
<dt><code>nr_descendants</code></dt>
<dd>....</dd>
<dt><code>nr_dying_descendants</code></dt>
<dd>
<p>....</p>
<p>....</p>
</dd>
</dl>
<h3 id="cgroup_2">자손 cgroup 수 제한</h3>
<p>....</p>
<dl>
<dt><code>cgroup.max.depth</code> (리눅스 4.14부터)</dt>
<dd>
<p>....</p>
<p>....</p>
</dd>
<dt><code>cgroup.max.descendants</code> (리눅스 4.14부터)</dt>
<dd>
<p>....</p>
<p>....</p>
</dd>
</dl>
<h2 id="cgroups">cgroups 위임: 특권 작은 사용자로 계층 구조 위임하기</h2>
<p>....</p>
<p>....</p>
<p>....</p>
<dl>
<dt><code>/dlgt_grp</code></dt>
<dd>....</dd>
<dt><code>/dlgt_grp/cgroup.procs</code></dt>
<dd>....</dd>
<dt><code>/dlgt_grp/cgroup.subtree_control</code> (cgroups v2 전용)</dt>
<dd>....</dd>
<dt><code>/dlgt_grp/cgroup.threads</code> (cgroups v2 전용)</dt>
<dd>
<p>....</p>
<p>....</p>
</dd>
</dl>
<p>....</p>
<p>....</p>
<p>....</p>
<h3 id="cgroups-v2-nsdelegate-cgroup">cgroups v2 위임: <code>nsdelegate</code>와 cgroup 네임스페이스</h3>
<p>....</p>
<pre><code>mount -t cgroup2 -o remount,nsdelegate \
                 none /sys/fs/cgroup/unified
</code></pre>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<p>....</p>
<p><strong>주의</strong>: ....</p>
<pre><code>cgroup_no_v1=all systemd.legacy_systemd_cgroup_controller
</code></pre>
<p>....</p>
<h3 id="cgroups_1">cgroups 위임 격납 규칙</h3>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p><strong>주의</strong>: ....</p>
<h2 id="cgroups-2_1">cgroups 버전 2 스레드 모드</h2>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<p>....</p>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<dl>
<dt><code>domain</code></dt>
<dd>....</dd>
<dt><code>threaded</code></dt>
<dd>....</dd>
<dt><code>domain threaded</code></dt>
<dd>....</dd>
<dt><code>domain invalid</code></dt>
<dd>
<p>....</p>
<p>....</p>
</dd>
</dl>
<h3 id="_3">스레드 대 도메인 컨트롤러</h3>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<h3 id="_4">스레드 서브트리 생성</h3>
<p>....</p>
<ol>
<li>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
</li>
<li>
<p>....</p>
</li>
</ol>
<p>....</p>
<ol>
<li>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
</li>
<li>
<p>....</p>
</li>
</ol>
<p>....</p>
<h3 id="_5">스레드 서브트리 사용</h3>
<p>....</p>
<p>....</p>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<p>....</p>
<p>....</p>
<p>....</p>
<h3 id="cgrouptype"><code>cgroup.type</code> 기록 및 스레드 서브트리 생성 규칙</h3>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<h3 id="domain-threaded-cgroup">"<code>domain threaded</code>" cgroup 유형</h3>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<h3 id="cgroup_3">루트 cgroup의 예외 사항</h3>
<p>....</p>
<ul>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ul>
<p>....</p>
<p>....</p>
<h3 id="cgroups-v2-cpu">cgroups v2 "cpu" 컨트롤러와 실시간 스레드</h3>
<p>....</p>
<p>....</p>
<h2 id="errors">ERRORS</h2>
<p>...</p>
<dl>
<dt><code>EBUSY</code></dt>
<dd>....</dd>
</dl>
<h2 id="notes">NOTES</h2>
<p>....</p>
<p>....</p>
<h3 id="proc"><code>/proc</code> 파일</h3>
<dl>
<dt><code>/proc/cgroups</code> (리눅스 2.6.24부터)</dt>
<dd>
<p>....</p>
<pre><code>#subsys_name    hierarchy      num_cgroups    enabled
cpuset          4              1              1
cpu             8              1              1
cpuacct         8              1              1
blkio           6              1              1
memory          3              1              1
devices         10             84             1
freezer         7              1              1
net_cls         9              1              1
perf_event      5              1              1
net_prio        9              1              1
hugetlb         0              1              0
pids            2              1              1
</code></pre>
<p>....</p>
<ol>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
<p>a) ....</p>
<p>b) ....</p>
<p>c) ....</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ol>
</dd>
<dt><code>/proc/[pid]/cgroup</code> (리눅스 2.6.24부터)</dt>
<dd>
<p>....</p>
<p>....</p>
<pre><code>hierarchy-ID:controller-list:cgroup-path
</code></pre>
<p>....</p>
<pre><code>5:cpuacct,cpu,cpuset:/daemons
</code></pre>
<p>....</p>
<ol>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
<li>
<p>....</p>
</li>
</ol>
</dd>
</dl>
<h3 id="syskernelcgroup"><code>/sys/kernel/cgroup</code> 파일</h3>
<dl>
<dt><code>/sys/kernel/cgroup/delegate</code> (리눅스 4.15부터)</dt>
<dd>....<pre><code>$ cat /sys/kernel/cgroup/delegate
cgroup.procs
cgroup.subtree_control
cgroup.threads
</code></pre>
</dd>
<dt><code>/sys/kernel/cgroup/features</code> (리눅스 4.15부터)</dt>
<dd>
<p>....</p>
<pre><code>$ cat /sys/kernel/cgroup/features
nsdelegate
memory_localevents
</code></pre>
<p>....</p>
<dl>
<dt><code>memory_localevents</code> (리눅스 5.2부터)</dt>
<dd>....</dd>
<dt><code>nsdelegate</code> (리눅스 4.15부터)</dt>
<dd>....</dd>
</dl>
</dd>
</dl>
<h2 id="see-also">SEE ALSO</h2>
<p><code>prlimit(1)</code>, <code>systemd(1)</code>, <code>systemd-cgls(1)</code>, <code>systemd-cgtop(1)</code>, <tt><a class="wikilink" href="/man-pages-ko/clone(2)/">clone(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/ioprio_set(2)/">ioprio_set(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/perf_event_open(2)/">perf_event_open(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/setrlimit(2)/">setrlimit(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/cgroup_namespaces(7)/">cgroup_namespaces(7)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/cpuset(7)/">cpuset(7)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/namespaces(7)/">namespaces(7)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/sched(7)/">sched(7)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/user_namespaces(7)/">user_namespaces(7)</a></tt></p>
<p>커널 소스 파일 <code>Documentation/admin-guide/cgroup-v2.rst</code>.</p>
<hr />
<p>2021-03-22</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = ".."</script>
    
    <script src="../js/base.js"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
