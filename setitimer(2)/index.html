<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="리눅스 매뉴얼 페이지 일부 한글 번역">
    
    <link rel="canonical" href="https://wariua.github.io/man-pages-ko/setitimer%282%29/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>setitimer(2) - man-pages-ko</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/idea.min.css">
        
    
    <link href="../css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="..">man-pages-ko</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../section_file/">File</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_ipc/">IPC</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_memory/">Memory</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_network/">Network</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_process/">Process</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_thread/">Thread</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_trouble_shooting/">Trouble Shooting</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_others/">Others</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#name">NAME</a></li>
        <li class="first-level "><a href="#synopsis">SYNOPSIS</a></li>
        <li class="first-level "><a href="#description">DESCRIPTION</a></li>
            <li class="second-level"><a href="#getitimer">getitimer()</a></li>
                
            <li class="second-level"><a href="#setitimer">setitimer()</a></li>
                
        <li class="first-level "><a href="#return-value">RETURN VALUE</a></li>
        <li class="first-level "><a href="#errors">ERRORS</a></li>
        <li class="first-level "><a href="#conforming-to">CONFORMING TO</a></li>
        <li class="first-level "><a href="#notes">NOTES</a></li>
        <li class="first-level "><a href="#bugs">BUGS</a></li>
        <li class="first-level "><a href="#see-also">SEE ALSO</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="name">NAME</h2>
<p>getitimer, setitimer - 간격 타이머 값 얻거나 설정하기</p>
<h2 id="synopsis">SYNOPSIS</h2>
<pre><code class="language-c">#include &lt;sys/time.h&gt;

int getitimer(int which, struct itimerval *curr_value);
int setitimer(int which, const struct itimerval *restrict new_value,
              struct itimerval *restrict old_value);
</code></pre>
<h2 id="description">DESCRIPTION</h2>
<p>이 시스템 호출들은 간격 타이머, 즉 미래 어느 시점에 최초 만료되고 (선택적으로) 이후 주기적 간격으로 만료되는 타이머들을 사용할 수 있게 해 준다. 타이머가 만료될 때 호출 프로세스에 시그널이 생성되고 (간격이 0이 아니면) 타이머가 지정 간격으로 재설정된다.</p>
<p>세 가지 종류의 타이머가 있어서 <code>which</code> 인자를 통해 지정한다. 각각은 서로 다른 클럭에 대해 계산을 하며 타이머 만료 시 다른 시그널을 생성한다.</p>
<dl>
<dt><code>ITIMER_REAL</code></dt>
<dd>실제 시간(즉 벽시계 시간)으로 타이머를 카운트다운 한다. 만료 때마다 <code>SIGALRM</code> 시그널이 생성된다.</dd>
<dt><code>ITIMER_VIRTUAL</code></dt>
<dd>프로세스가 소모한 사용자 모드 CPU 시간에 대해 타이머를 카운트다운 한다. (프로세스 내의 모든 스레드들이 소모한 CPU 시간이 측정에 포함된다.) 만료 때마다 <code>SIGVTALRM</code> 시그널이 생성된다.</dd>
<dt><code>ITIMER_PROF</code></dt>
<dd>
<p>프로세스가 소모한 CPU 시간(즉 사용자 시간과 시스템 시간 모두)에 대해 타이머를 카운트다운 한다. (프로세스 내의 모든 스레드들이 소모한 CPU 시간이 측정에 포함된다.) 만료 때마다 <code>SIGPROF</code> 시그널이 생성된다.</p>
<p>이 타이머를 <code>ITIMER_VIRTUAL</code>과 함께 사용하여 프로세스가 소모한 사용자 및 시스템 CPU 시간을 프로파일 할 수 있다.</p>
</dd>
</dl>
<p>프로세스는 세 가지 타이머 종류별로 하나씩을 가지고 있다.</p>
<p>다음 구조체들로 타이머 값을 지정한다.</p>
<pre><code class="language-c">struct itimerval {
    struct timeval it_interval; /* 주기 타이머의 간격 */
    struct timeval it_value;    /* 다음 만료까지의 시간 */
};

struct timeval {
    time_t      tv_sec;         /* 초 */
    suseconds_t tv_usec;        /* 마이크로초 */
};
</code></pre>
<h3 id="getitimer"><code>getitimer()</code></h3>
<p><code>getitimer()</code> 함수는 <code>which</code>로 지정한 타이머의 현재 값을 <code>curr_value</code>가 가리키는 버퍼에 넣는다.</p>
<p><code>it_value</code> 하위 구조체에는 지정한 타이머의 다음 만료 때까지 남은 시간이 채워진다. 이 값은 타이머가 카운트다운 하면서 바뀌게 되며 타이머가 만료될 때 <code>it_interval</code>로 재설정된다. <code>it_value</code>의 두 필드가 모두 0이면 이 타이머는 현재 해제된 (비활성) 상태이다.</p>
<p><code>it_interval</code> 하위 구조체에는 타이머 간격이 채워진다. <code>it_interval</code>의 두 필드가 모두 0이면 이 타이머는 단발성이다. (즉, 한 번만 만료된다.)</p>
<h3 id="setitimer"><code>setitimer()</code></h3>
<p><code>setitimer()</code> 함수는 <code>new_value</code>로 지정한 값으로 타이머를 설정하여 <code>which</code>로 지정한 타이머를 장전하거나 해제한다. <code>old_value</code>가 NULL이 아니면 그 버퍼를 이용해 타이머의 이전 값을 (즉, <code>getitimer()</code>가 반환하는 것과 같은 정보를) 반환한다.</p>
<p><code>new_value.it_value</code>의 어느 한 필드라도 0이 아니면 그 지정 시간에 최초 만료되도록 타이머를 장전한다. <code>new_value.it_value</code>의 두 필드가 모두 0이면 타이머를 해제한다.</p>
<p><code>new_value.it_interval</code> 필드가 타이머의 새 간격을 지정한다. 그 하위 필드가 둘 모두 0이면 타이머가 단발성이다.</p>
<h2 id="return-value">RETURN VALUE</h2>
<p>성공 시 0을 반환한다. 오류 시 -1을 반환하며 오류를 나타내도록 <code>errno</code>를 설정한다.</p>
<h2 id="errors">ERRORS</h2>
<dl>
<dt><code>EFAULT</code></dt>
<dd><code>new_value</code>나 <code>old_value</code>, <code>curr_value</code>가 유효한 포인터가 아니다.</dd>
<dt><code>EINVAL</code></dt>
<dd><code>which</code>가 <code>ITIMER_REAL</code>, <code>ITIMER_VIRTUAL</code>, <code>ITIMER_PROF</code> 중 하나가 아니다. 또는 (리눅스 2.6.22부터) <code>new_value</code>가 가리키는 구조체 내의 한 <code>tv_usec</code> 필드가 0에서 999999까지 범위 밖의 값을 담고 있다.</dd>
</dl>
<h2 id="conforming-to">CONFORMING TO</h2>
<p>POSIX.1-2001, SVr4, 4.4BSD (4.2BSD에서 이 호출이 처음 등장). POSIX.1-2008에서는 <code>getitimer()</code>와 <code>setitimer()</code>를 구식으로 표시하고 대신 POSIX 타이머 API(<tt><a class="wikilink" href="/man-pages-ko/timer_gettime(2)/">timer_gettime(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/timer_settime(2)/">timer_settime(2)</a></tt> 등) 사용을 권장한다.</p>
<h2 id="notes">NOTES</h2>
<p>타이머는 요청 시간 전에는 절대 만료되지 않지만 시스템 타이머 해상도와 시스템 부하에 따라서 약간의 (짧은) 시간 후에 만료될 수도 있다. <tt><a class="wikilink" href="/man-pages-ko/time(7)/">time(7)</a></tt> 참고. (하지만 아래 BUGS를 보라.) 프로세스가 활동 중인 동안 타이머가 만료되면 (<code>ITIMER_VIRTUAL</code>에서는 항상 참이다) 시그널이 생성 즉시 전달될 것이다.</p>
<p><tt><a class="wikilink" href="/man-pages-ko/fork(2)/">fork(2)</a></tt>로 생성한 자식이 부모의 간격 타이머들을 물려받지 않는다. <tt><a class="wikilink" href="/man-pages-ko/execve(2)/">execve(2)</a></tt>를 거칠 때 간격 타이머들이 유지된다.</p>
<p>POSIX.1에서는 <code>setitimer()</code>와 세 가지 인터페이스 <tt><a class="wikilink" href="/man-pages-ko/alarm(2)/">alarm(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/sleep(3)/">sleep(3)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/usleep(3)/">usleep(3)</a></tt>과의 상호작용을 명세하지 않고 남겨두었다.</p>
<p>표준들에서 다음 호출의 의미에 대해 언급하지 않고 있다.</p>
<pre><code class="language-c">setitimer(which, NULL, &amp;old_value);
</code></pre>
<p>대부분의 (솔라리스, BSD, 그리고 아마 다른) 시스템들에서는 이를 다음과 동등하게 다룬다.</p>
<pre><code class="language-c">getitimer(which, &amp;old_value);
</code></pre>
<p>리눅스에서는 이를 <code>new_value</code>의 필드들이 0인 호출과 동등하게 다룬다. 즉, 타이머가 비활성화된다. <em>리눅스의 이 비기능을 이용해서는 안 된다.</em> 이식성이 없으며 필요한 것도 아니다.</p>
<h2 id="bugs">BUGS</h2>
<p>시그널의 생성과 전달은 서로 별개이며 프로세스별로 위에 나열된 시그널들마다 한 인스턴스만 미처리 상태일 수 있다. 아주 높은 부하에서는 앞선 만료에서의 시그널이 전달되기 전에 <code>ITIMER_REAL</code> 타이머가 다시 만료될 수도 있다. 그런 경우 두 번째 시그널은 유실되게 된다.</p>
<p>리눅스 커널 2.6.16 전에서는 타이머 값들을 지피로 표현한다. 지피로 표현하면 (<code>include/linux/jiffies.h</code>에 정의된) <code>MAX_SEC_IN_JIFFIES</code>를 초과하는 값으로 타이머를 설정하도록 요청하면 조용하게 타이머를 그 상한 값으로 잘라낸다. (리눅스 2.6.13부터 기본 지피가 0.004초인) 리눅스/i386에서라면 타이머의 상한값이 약 99.42일이라는 뜻이다. 리눅스 2.6.16부터는 커널에서 시간에 대해 다른 내부 표현을 사용하므로 이런 상한이 없다.</p>
<p>특정 시스템들(i386 포함)에서 버전 2.6.12 전의 리눅스 커널에는 일부 상황에서 한 지피까지 이르게 타이머 만료가 일어나는 버그가 있다. 커널 2.6.12에서 이 버그가 수정되었다.</p>
<p>POSIX.1-2001에서는 <code>tv_usec</code> 값을 0에서 999999까지 범위를 벗어나게 지정한 경우 <code>setitimer()</code>가 실패해야 한다고 한다. 하지만 2.6.21까지 커널에서 리눅스는 오류를 주지 않고 그 대신 조용하게 타이머의 대응하는 초 값을 조정한다. 커널 2.6.22부터는 이런 비준수 사항이 고쳐져서 잘못된 <code>tv_usec</code> 값이 <code>EINVAL</code> 오류를 유발한다.</p>
<h2 id="see-also">SEE ALSO</h2>
<p><tt><a class="wikilink" href="/man-pages-ko/gettimeofday(2)/">gettimeofday(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/sigaction(2)/">sigaction(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/signal(2)/">signal(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/timer_create(2)/">timer_create(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/timerfd_create(2)/">timerfd_create(2)</a></tt>, <tt><a class="wikilink" href="/man-pages-ko/time(7)/">time(7)</a></tt></p>
<hr />
<p>2021-03-22</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = ".."</script>
    
    <script src="../js/base.js"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
