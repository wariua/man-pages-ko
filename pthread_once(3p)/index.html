<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="리눅스 매뉴얼 페이지 일부 한글 번역">
    
    <link rel="canonical" href="https://wariua.github.io/man-pages-ko/pthread_once%283p%29/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>pthread_once(3p) - man-pages-ko</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/idea.min.css">
        
    
    <link href="../css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="..">man-pages-ko</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../section_file/">File</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_ipc/">IPC</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_memory/">Memory</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_network/">Network</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_process/">Process</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_thread/">Thread</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_trouble_shooting/">Trouble Shooting</a>
                    </li>
                
                
                
                    <li >
                        <a href="../section_others/">Others</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#prolog">PROLOG</a></li>
        <li class="first-level "><a href="#name">NAME</a></li>
        <li class="first-level "><a href="#synopsis">SYNOPSIS</a></li>
        <li class="first-level "><a href="#description">DESCRIPTION</a></li>
        <li class="first-level "><a href="#return-value">RETURN VALUE</a></li>
        <li class="first-level "><a href="#errors">ERRORS</a></li>
        <li class="first-level "><a href="#examples">EXAMPLES</a></li>
        <li class="first-level "><a href="#application-usage">APPLICATION USAGE</a></li>
        <li class="first-level "><a href="#rationale">RATIONALE</a></li>
        <li class="first-level "><a href="#future-directions">FUTURE DIRECTIONS</a></li>
        <li class="first-level "><a href="#see-also">SEE ALSO</a></li>
        <li class="first-level "><a href="#copyright">COPYRIGHT</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="prolog">PROLOG</h2>
<p>이 매뉴얼 페이지는 POSIX 프로그래머 매뉴얼의 일부이다. 이 인터페이스의 리눅스 구현에 차이가 있을 수 있으며 (상세한 리눅스 동작 방식은 해당 리눅스 매뉴얼 페이지 참고) 리눅스에서 이 인터페이스가 구현되어 있지 않을 수도 있다.</p>
<h2 id="name">NAME</h2>
<p>pthread_once - 패키지 동적 초기화</p>
<h2 id="synopsis">SYNOPSIS</h2>
<pre><code class="language-c">#include &lt;pthread.h&gt;

int pthread_once(pthread_once_t *once_control,
    void (*init_routine)(void));
pthread_once_t once_control = PTHREAD_ONCE_INIT;
</code></pre>
<h2 id="description">DESCRIPTION</h2>
<p>프로세스 내의 한 스레드에 의해 어떤 <code>once_control</code>로 <code>pthread_once()</code>가 처음 호출되는 것이면 인자 없이 <code>init_routine</code>을 호출한다. 이후 같은 <code>once_control</code>로 <code>pthread_once()</code> 호출을 하면 <code>init_routine</code>을 호출하지 않는다. <code>pthread_once()</code>에서 반환 시에는 <code>init_routine</code>이 완료되어 있다. <code>once_control</code> 매개변수를 통해 관련 초기화 루틴을 호출했는지 판단한다.</p>
<p><code>pthread_once()</code> 함수는 취소점이 아니다. 하지만 <code>init_routine</code>이 취소점이어서 취소가 되는 경우 <code>once_control</code>에 대한 작용은 <code>pthread_once()</code>가 전혀 호출되지 않은 경우와 같다.</p>
<p>상수 <code>PTHREAD_ONCE_INIT</code>이 <code>&lt;pthread.h&gt;</code> 헤더에 정의되어 있다.</p>
<p><code>once_control</code>의 저장 기간이 자동이거나 <code>PTHREAD_ONCE_INIT</code>으로 초기화 되어 있지 않은 경우 <code>pthread_once()</code>의 동작 방식은 규정되어 있지 않다.</p>
<h2 id="return-value">RETURN VALUE</h2>
<p>성공 완료 시 <code>pthread_once()</code>는 0을 반환한다. 아니면 오류를 나타내는 오류 번호를 반환한다.</p>
<h2 id="errors">ERRORS</h2>
<p><code>pthread_once()</code> 함수는 오류 코드 <code>[EINTR]</code>을 반환하지 않는다.</p>
<p><em>이하는 규범적이지 않은 내용이다.</em></p>
<h2 id="examples">EXAMPLES</h2>
<p>없음.</p>
<h2 id="application-usage">APPLICATION USAGE</h2>
<p>없음.</p>
<h2 id="rationale">RATIONALE</h2>
<p>어떤 C 라이브러리들은 동적 초기화를 하도록 설계되어 있다. 즉, 라이브러리 내의 첫 번째 프로시저가 불릴 때 라이브러리 전역 초기화를 수행한다. 단일 스레드 프로그램에서는 보통 다음과 같이 정적 변수를 두고 루틴 진입 시마다 확인하는 식으로 구현한다.</p>
<pre><code class="language-c">static int random_is_initialized = 0;
extern int initialize_random();

int random_function()
{
    if (random_is_initialized == 0) {
        initialize_random();
        random_is_initialized = 1;
    }
    ... /* 초기화 후 수행하는 동작들 */
}
</code></pre>
<p>다중 스레드 프로그램에서 같은 구조를 유지하려면 새로운 구성 요소가 필요하다. 안 그러면 라이브러리 사용에 앞서 라이브러리에서 내보이는 초기화 함수를 명시적으로 호출하는 방식으로 라이브러리 초기화를 해야 한다.</p>
<p>다중 스레드 프로세스에서의 동적 라이브러리 초기화를 위해선 단순한 초기화 플래그로는 충분하지 않다. 라이브러리를 동시에 호출하는 여러 스레드들에 대해서 플래그를 보호할 필요가 있기 때문이다. 플래그 보호를 위해선 뮤텍스를 사용해야 하는데 뮤텍스를 쓰려면 먼저 초기화를 해야 한다. 그리고 뮤텍스를 한 번만 초기화 되도록 하기 위해선 이 문제에 대한 순환적인 해법이 필요하다.</p>
<p><code>pthread_once()</code> 사용은 구현에서 보장하는 동적 초기화 수단을 제공하는 것만이 아니라 다중 스레드이며 실시간인 시스템을 믿을 만하게 만드는 데 도움을 준다. 앞의 예가 다음과 같이 된다.</p>
<pre><code class="language-c">#include &lt;pthread.h&gt;
static pthread_once_t random_is_initialized = PTHREAD_ONCE_INIT;
extern int initialize_random();

int random_function()
{
    (void) pthread_once(&amp;random_is_initialized, initialize_random);
    ... /* 초기화 후 수행하는 동작들 */
}
</code></pre>
<p>참고로 일부 컴파일러에서 <code>&amp;&lt;배열_이름&gt;</code> 구문을 허용하지 않으므로 <code>pthread_once_t</code>가 배열일 수 없다.</p>
<p><code>pthread_once()</code>의 <code>once_control</code> 인자로 지정한 값이 <code>PTHREAD_ONCE_INIT</code>으로 초기화 한 <code>pthread_once_t</code> 객체를 가리키고 있지 않음을 구현에서 감지하는 경우 함수를 실패 처리하고 <code>[EINVAL]</code> 오류를 보고하기를 권장한다.</p>
<h2 id="future-directions">FUTURE DIRECTIONS</h2>
<p>없음.</p>
<h2 id="see-also">SEE ALSO</h2>
<p>POSIX.1-2008 Base Definitions 권, <code>&lt;pthread.h&gt;</code></p>
<h2 id="copyright">COPYRIGHT</h2>
<p>Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2013 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 7, Copyright (C) 2013 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. (This is POSIX.1-2008 with the 2013 Technical Corrigendum 1 applied.) In the event of any discrepancy between this version and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at <a href="http://www.unix.org/online.html">http://www.unix.org/online.html</a>.</p>
<p>Any typographical or formatting errors that appear in this page are most likely to have been introduced during the conversion of the source files to man page format. To report such errors, see <a href="https://www.kernel.org/doc/man-pages/reporting_bugs.html">https://www.kernel.org/doc/man-pages/reporting_bugs.html</a>.</p>
<hr />
<p>2013</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = ".."</script>
    
    <script src="../js/base.js"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
